//This method launches the alert box
function AlertObject(name, id, type, value,elementId){this.name = name ; this.type = type ;this.value = value ;this.id = id ;this.elementId = elementId ;}var arr = new Array() ;arr[arr.length] = arr['checkboxElt11340797740846dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','bc_executive','checkboxElt11340797740846dIi15v_checkbox')];arr[arr.length] = arr['errorIndElt11345879660243dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt11345879660243dIi15v_errorInd')];arr[arr.length] = arr['checkboxElt21340797827264dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','bc_finance','checkboxElt21340797827264dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt21340798624317dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','bc_audit','checkboxElt21340798624317dIi15v_checkbox')];arr[arr.length] = arr['errorIndElt1345879785359dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345879785359dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt11340798921896dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt11340798921896dIi15v_select')];arr[arr.length] = arr['errorIndElt1345879790847dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345879790847dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt11340800580861dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt11340800580861dIi15v_select')];arr[arr.length] = arr['checkboxElt11340801027343dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','annual_budget','checkboxElt11340801027343dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt21340801250774dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','policise_procedure','checkboxElt21340801250774dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt21340801639219dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','exec_performance','checkboxElt21340801639219dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt11340802879576dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','fund_raising','checkboxElt11340802879576dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt21340802935875dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','internal_controls','checkboxElt21340802935875dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt21340803108860dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','ann_ind_audit','checkboxElt21340803108860dIi15v_checkbox')];arr[arr.length] = arr['errorIndElt1345879791192dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345879791192dIi15v_errorInd')];arr[arr.length] = arr['checkboxElt11340803760739dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','form_irs_990','checkboxElt11340803760739dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt21340803825975dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','prog_opp_outcomes','checkboxElt21340803825975dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt21340804029855dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','bank_acc','checkboxElt21340804029855dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt11340805316197dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','buy_sell','checkboxElt11340805316197dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt21340805345118dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','non_of_above','checkboxElt21340805345118dIi15v_checkbox')];arr[arr.length] = arr['dropdownElt1340806247129dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340806247129dIi15v_select')];arr[arr.length] = arr['errorIndElt1345879791434dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345879791434dIi15v_errorInd')];arr[arr.length] = arr['textareaElt11340806455767dIi15v_textarea']= [new AlertObject('alert1','alert1','m','! This field is required.','textareaElt11340806455767dIi15v_textarea')];arr[arr.length] = arr['errorIndElt1345879791638dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345879791638dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340806784942dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340806784942dIi15v_select')];arr[arr.length] = arr['errorIndElt11346395706482dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt11346395706482dIi15v_errorInd')];arr[arr.length] = arr['textareaElt1340807018741dIi15v_textarea']= [new AlertObject('alert1','alert1','m','! This field is required.','textareaElt1340807018741dIi15v_textarea')];arr[arr.length] = arr['errorIndElt1345879791773dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345879791773dIi15v_errorInd')];arr[arr.length] = arr['errorIndElt1345879791969dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345879791969dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340807257809dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340807257809dIi15v_select')];arr[arr.length] = arr['buttonElt11340807229452dIi15v_button']= [new AlertObject('alert1','alert1',' ',' ','buttonElt11340807229452dIi15v_button')];arr[arr.length] = arr['buttonElt11340807507869dIi15v_button']= [new AlertObject('alert1','alert1',' ',' ','buttonElt11340807507869dIi15v_button')];arr[arr.length] = arr['buttonElt21340807519711dIi15v_button']= [new AlertObject('alert1','alert1',' ',' ','buttonElt21340807519711dIi15v_button')];function ExtensionObject(filetype,filesize,fileunit){this.filetype = filetype ;this.filesize= filesize;this.fileunit = fileunit ;}var extArr = new Array() ;var selectBoxNames = new Array('annual_budget', 'policise_procedure', 'exec_performance', 'fund_raising', 'internal_controls', 'ann_ind_audit', 'form_irs_990', 'prog_opp_outcomes', 'bank_acc', 'buy_sell');var selectBoardBoxNames = new Array('bc_executive', 'bc_finance', 'bc_audit');
var checkBoxNoneName = "non_of_above";
var rules = new Array();
function ruleObject(name, value, effectedElementName){
	this.name = name ;
	this.value = value ;
	this.effName = effectedElementName ;
}
rules[rules.length] = rules['review_financials'] = new Array(new ruleObject('review_financials', 'Other', 'div_row_q9'));
rules[rules.length] = rules['budget_cash_projection'] = new Array(new ruleObject('budget_cash_projection', 'Other', 'div_row_q11'));

var lastData = null;
/* on page load
Updated Method in R4
*/
$(document).ready(function() {
	
	removePageGreyOut();
	$("span.label").each(function(){
		if($(this).height() < $(this).next().height())
			$(this).css({"height": $(this).next().height()});
	 });
	// This function checks the input and performs action accordingly
	$("input[type='button'][id^='buttonElt']").click(function(e){
		pageGreyOut();
		var buttonName = $(this).attr("name");
		if(buttonName == "back"){
			var $form = $("#fb_divBl0ck1").closest('form');
			var isSame = false;
			data = $form.serializeArray();
			if(lastData != null){
				if($(lastData).compare($(data))){
					isSame = true;
				}
			}
			if(!isSame && lastData != null){
				e.preventDefault();
				$('<div id="dialogBox"></div>').appendTo('body')
	               .html('<div><h6>You have unsaved data. <br />If you would like to leave this screen without saving your data, click <b>OK</b>. <br/>If you would like to save your data, click <b>Cancel</b> and save your data.</h6></div>')
	               .dialog({
	                     modal: true, title: 'Unsaved Data', zIndex: 10000, autoOpen: true,
	                     width: 'auto', modal: true, resizable: false, draggable:false,
	                     dialogClass: 'dialogButtons',
	                     buttons: {
	                    	 // submits the form
	                           OK: function () {
	                        	   submitForm(buttonName);
	   							$(this).dialog("close");
	                           },// closes the dialogue box
	                           Cancel: function () {
	                        	   $(this).dialog("close");
	                           }
	                     },
	                     close: function (event, ui) {
	                           $(this).remove();
	                     }
	               });
				$("div.dialogButtons div button:nth-child(2)").find("span").addClass("graybtutton");
			}else{
				submitForm(buttonName);
			}
		}else{
			submitForm(buttonName);
		}
	});// calls checkAndDisplay passing node information as parameter 
	$("input, select").change(function(){
		var changedNode = $(this);
		checkAndDisplay(changedNode, false);
	});
	$("select, input , textarea").each(function(){
		checkAndDisplay($(this), true);
	});
	$("div[id^='fb_divBl0ck']").each(function(){
		if($(this).children().size() <= 0){
			$(this).hide();
		}else if($(this).children().size() == 1){
			$(this).children().each(function(){
				if($(this).css("display").toLowerCase() == "none"){
					$(this).parent().hide().find("input, select, textarea").attr("disabled", true);
				}
			});
		}
	});
	var $form = $("#fb_divBl0ck1").closest('form');
	lastData = $form.serializeArray();
});


// This method validates the form
function validateForm(){
	var checkBoxGroup1 =  new Array();
	checkBoxGroup1[0] = "bc_executive";
	checkBoxGroup1[1] = "bc_finance";
	checkBoxGroup1[2] = "bc_audit";
	checkBoxGroup1[3] = "bc_na";
	var isChecked1 = false;
	if(!$("input[name='"+checkBoxGroup1[0]+"']").is(':disabled')){
		for(var i=0; i<checkBoxGroup1.length; i++ ){
			if($("input[name='"+checkBoxGroup1[i]+"']").is(":checked")){
				isChecked1 = true;
				break;
			}
		}
	}else{
		isChecked1 = true;
	}
	var checkBoxGroup2 =  new Array();
	checkBoxGroup2[0] = 'annual_budget';
	checkBoxGroup2[1] = 'policise_procedure';
	checkBoxGroup2[2] = 'exec_performance';
	checkBoxGroup2[3] = 'fund_raising';
	checkBoxGroup2[4] = 'internal_controls';
	checkBoxGroup2[5] = 'ann_ind_audit';
	checkBoxGroup2[6] = 'form_irs_990';
	checkBoxGroup2[7] = 'prog_opp_outcomes';
	checkBoxGroup2[8] = 'bank_acc';
	checkBoxGroup2[9] = 'buy_sell';
	checkBoxGroup2[10] = 'non_of_above';
	var isChecked2 = false;
	if(!$("input[name='"+checkBoxGroup2[0]+"']").is(':disabled')){
		for(var i=0; i<checkBoxGroup2.length; i++ ){
			if($("input[name='"+checkBoxGroup2[i]+"']").is(":checked")){
				isChecked2 = true;
				break;
			}
		}
	}else{
		isChecked2 = true;
	}
	if(!isChecked1 || !isChecked2){
		if($(".errorMessages").length == 0){
			$("<ul class='errorMessages'></ul>").insertBefore("#fb_divBl0ck1");
		}
		$(".errorMessages").html("");
		if(!isChecked1){
			$(".errorMessages").append("<li>Please select atleast one type of board committees</li>");
		}
		if(!isChecked2){
			$(".errorMessages").append("<li>Please select atleast one item your organizations Board of Directors reviews and/or approves</li>");
		}
		return false;
	}
	return true;
}
//This method checks and displays the element selected 
function checkAndDisplay(changedNode, isOnLoad){
	var elementChangedName = changedNode.attr("name");
	hideUnhide(changedNode, isOnLoad);
	if(elementChangedName == checkBoxNoneName){
		if(changedNode.is(":checked")){
			$.each(selectBoxNames, function(key) {
				$("input[name="+selectBoxNames[key]+"]").attr("disabled", true);
			});
		}else{
			$.each(selectBoxNames, function(key) {
				if(!isOnLoad)
					$("input[name="+selectBoxNames[key]+"]").attr("disabled", false);
			});
		}
	}
	if($.inArray(elementChangedName, selectBoxNames) != -1){
		var someChecked = false;
		$.each(selectBoxNames, function(key) { 
			if($("input[name="+selectBoxNames[key]+"]").is(":checked")){
				someChecked = true;
			}
		});
		if(someChecked){
			$("input[name="+checkBoxNoneName+"]").attr("disabled", true);
		}else{
			if(!isOnLoad)
				$("input[name="+checkBoxNoneName+"]").attr("disabled", false);
		}
	}
	var elementChangedName = changedNode.attr("name");
	hideUnhide(changedNode, isOnLoad);
	if(elementChangedName == "bc_na"  ){
		if(changedNode.is(":checked")){
			$.each(selectBoardBoxNames, function(key) {
				$("input[name="+selectBoardBoxNames[key]+"]").attr("disabled", true);
			});
		}else{
			$.each(selectBoardBoxNames, function(key) {
				if(!isOnLoad)
					$("input[name="+selectBoardBoxNames[key]+"]").attr("disabled", false);
			});
		}
	}
	if($.inArray(elementChangedName, selectBoardBoxNames) != -1){
		var someChecked = false;
		$.each(selectBoardBoxNames, function(key) { 
			if($("input[name="+selectBoardBoxNames[key]+"]").is(":checked")){
				someChecked = true;
			}
		});
		if(someChecked){
			$("input[name="+'bc_na'+"]").attr("disabled", true);
		}else{
			if(!isOnLoad)
				$("input[name="+'bc_na'+"]").attr("disabled", false);
		}
	}
}

var coveredItem = new Array();
//This method is used to hide/unhide the node
function hideUnhide(changedNode, isOnLoad){
	var elementChangedName = changedNode.attr("name");
	var ruleElts = rules[elementChangedName] ;
	if(ruleElts != null && typeof(ruleElts)!="undefined"){
		$.each(ruleElts, function(key) {
			ruleElt = ruleElts[key];
			if(ruleElt != null && typeof(ruleElt) != "undefined"){
				var requiredValue = ruleElt.value;
				var isArrayFlag = $.isArray(requiredValue);
				if((!isArrayFlag && requiredValue != "" && changedNode.val() ==  requiredValue) || (!isArrayFlag && requiredValue == "" && changedNode.is(":checked"))
						|| (isArrayFlag && $.inArray(changedNode.val(), requiredValue) >= 0)){
					$("div[name="+ruleElt.effName+"]").parent().show();
					if(!isOnLoad)
						$("div[name="+ruleElt.effName+"]").parent().find("input, select, textarea").attr("disabled", false);
					$("div[name="+ruleElt.effName+"]").parent().show().children().show();
					$("span.label").each(function(){
						if($(this).height() < $(this).next().height())
							$(this).css({"height": $(this).next().height()});
					 });
				}else{
					if((isOnLoad && $.inArray(ruleElt.effName, coveredItem)>=0) || !isOnLoad){
						$("div[name="+ruleElt.effName+"]").parent().hide().find("input, select, textarea").each(function(){
							if($(this).get(0).nodeName.toLowerCase() == "input"){
								if($(this).attr("type").toLowerCase() == "radio" || $(this).attr("type").toLowerCase() == "checkbox"){
									$(this).attr('checked', false);
								}else if($(this).attr("type").toLowerCase() != "password"){
									$(this).val("");
								}
							}else if($(this).get(0).nodeName.toLowerCase() == "textarea"){
								$(this).html("");
							}else if($(this).get(0).nodeName.toLowerCase() == "select"){
								$(this).val(" ");
							}
							hideUnhide($(this), isOnLoad);
						}).attr("disabled", true);
					}
					if(isOnLoad && $.inArray(ruleElt.effName, coveredItem) == -1){
						coveredItem[coveredItem.length] = ruleElt.effName;
					}
				}
			}
		});
	}
}
//This method is used to compare
jQuery.fn.compare = function(t) {
	if (this.length != t.length) { return false; }
	var a = this.sort(),
	b = t.sort();
	for (var i = 0; t[i]; i++) {
		if (a[i].name != b[i].name || a[i].value != b[i].value) { 
			return false;
		}
	}
	return true;
};