//This method launches the alert box
function AlertObject(name, id, type, value,elementId){this.name = name ; this.type = type ;this.value = value ;this.id = id ;this.elementId = elementId ;}var arr = new Array() ;arr[arr.length] = arr['errorIndElt1345880971903dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345880971903dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt11340864782383dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt11340864782383dIi15v_select')];arr[arr.length] = arr['errorIndElt1345881044987dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881044987dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340865329905dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340865329905dIi15v_select')];arr[arr.length] = arr['textboxElt11340865699865dIi15v_textbox']= [new AlertObject('alert1','alert1','m','! This field is required.','textboxElt11340865699865dIi15v_textbox'),new AlertObject('alert2','alert2','i','enter_amount','textboxElt11340865699865dIi15v_textbox')];arr[arr.length] = arr['errorIndElt1345881047976dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881047976dIi15v_errorInd')];arr[arr.length] = arr['textareaElt11340865916606dIi15v_textarea']= [new AlertObject('alert1','alert1','m','! This field is required.','textareaElt11340865916606dIi15v_textarea')];arr[arr.length] = arr['errorIndElt1345881048145dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881048145dIi15v_errorInd')];arr[arr.length] = arr['errorIndElt1345881048349dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881048349dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340866260079dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340866260079dIi15v_select')];arr[arr.length] = arr['textareaElt1340866698647dIi15v_textarea']= [new AlertObject('alert1','alert1','m','! This field is required.','textareaElt1340866698647dIi15v_textarea')];arr[arr.length] = arr['errorIndElt1345881048490dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881048490dIi15v_errorInd')];arr[arr.length] = arr['errorIndElt1345881048772dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881048772dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340867484461dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340867484461dIi15v_select')];arr[arr.length] = arr['errorIndElt1345881048975dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881048975dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340867745408dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340867745408dIi15v_select')];arr[arr.length] = arr['errorIndElt1345881049196dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881049196dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340867915736dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340867915736dIi15v_select')];arr[arr.length] = arr['checkboxElt11340869933855dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','CEO Compensation Policy','checkboxElt11340869933855dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340870460961dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Employee Loan Policy','checkboxElt1340870460961dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340875265787dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Anti-Nepotism Policy','checkboxElt1340875265787dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340875742088dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Staff Code of Conduct','checkboxElt1340875742088dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340876110214dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Board of Directors Conflict of Interest Policy','checkboxElt1340876110214dIi15v_checkbox')];arr[arr.length] = arr['errorIndElt1345881049316dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881049316dIi15v_errorInd')];arr[arr.length] = arr['checkboxElt1340876293783dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Continuity of Operations plan','checkboxElt1340876293783dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340876414099dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Continuity of Operations plan','checkboxElt1340876414099dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340876548991dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Diversity Policy','checkboxElt1340876548991dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340876679401dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Emergency Preparedness Policy','checkboxElt1340876679401dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340876820674dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Whistleblower Policy','checkboxElt1340876820674dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340876954169dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Record Retention Policy','checkboxElt1340876954169dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340877117912dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Security Policy','checkboxElt1340877117912dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340877370937dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','Succession/Transition Policy','checkboxElt1340877370937dIi15v_checkbox')];arr[arr.length] = arr['checkboxElt1340877540511dIi15v_checkbox']= [new AlertObject('alert1','alert1','nm','None of the above','checkboxElt1340877540511dIi15v_checkbox')];arr[arr.length] = arr['errorIndElt1345881049572dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881049572dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340879204632dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340879204632dIi15v_select')];arr[arr.length] = arr['errorIndElt1345881049831dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881049831dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340879460508dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340879460508dIi15v_select')];arr[arr.length] = arr['textareaElt1340879755121dIi15v_textarea']= [new AlertObject('alert1','alert1','m','! This field is required.','textareaElt1340879755121dIi15v_textarea')];arr[arr.length] = arr['errorIndElt1345881049947dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881049947dIi15v_errorInd')];arr[arr.length] = arr['errorIndElt1345881050146dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881050146dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340880070553dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340880070553dIi15v_select')];arr[arr.length] = arr['errorIndElt1345881050430dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881050430dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340880371638dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340880371638dIi15v_select')];arr[arr.length] = arr['textareaElt1340880650040dIi15v_textarea']= [new AlertObject('alert1','alert1','m','! This field is required.','textareaElt1340880650040dIi15v_textarea')];arr[arr.length] = arr['errorIndElt1345881050640dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881050640dIi15v_errorInd')];arr[arr.length] = arr['errorIndElt1345881050867dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881050867dIi15v_errorInd')];arr[arr.length] = arr['dropdownElt1340881017696dIi15v_select']= [new AlertObject('alert1','alert1','m','! This field is required.','dropdownElt1340881017696dIi15v_select')];arr[arr.length] = arr['textareaElt1340881304243dIi15v_textarea']= [new AlertObject('alert1','alert1','m','! This field is required.','textareaElt1340881304243dIi15v_textarea')];arr[arr.length] = arr['errorIndElt1345881051015dIi15v_errorInd']= [new AlertObject('alert1','alert1',' ',' ','errorIndElt1345881051015dIi15v_errorInd')];arr[arr.length] = arr['buttonElt11340881502927dIi15v_button']= [new AlertObject('alert1','alert1',' ',' ','buttonElt11340881502927dIi15v_button')];arr[arr.length] = arr['buttonElt11341727695460dIi15v_button']= [new AlertObject('alert1','alert1',' ',' ','buttonElt11341727695460dIi15v_button')];arr[arr.length] = arr['buttonElt21341728063174dIi15v_button']= [new AlertObject('alert1','alert1',' ',' ','buttonElt21341728063174dIi15v_button')];function ExtensionObject(filetype,filesize,fileunit){this.filetype = filetype ;this.filesize= filesize;this.fileunit = fileunit ;}var extArr = new Array() ;var selectBoxNames = new Array('ceo_policy', 'emp_policy', 'anti_nepo', 'staff_code_conduct', 'doc_retemp_policy', 'director_conflict', 'conflict_interest', 'conti_opp', 'diversity', 'emergency_pol', 'whistle_blower', 'record_rettention', 'security_pol', 'transition');
var checkBoxNoneName = "policy_none";
var rules = new Array();
// This method defines the rules
function ruleObject(name, value, effectedElementName){
	this.name = name ; 
	this.value = value ;
	this.effName = effectedElementName ;
}
rules[rules.length] = rules['sign_check'] = new Array(new ruleObject('sign_check', 'Yes', 'div_row_q2'),
		new ruleObject('sign_check', 'No', 'div_row_q4'));
rules[rules.length] = rules['indicate_sign_check'] = new Array(new ruleObject('indicate_sign_check', 'Above a specified amount', 'div_row_q3'));
rules[rules.length] = rules['record_financial'] = new Array(new ruleObject('record_financial', 'No', 'div_row_q6'));
rules[rules.length] = rules['professional_dev'] = new Array(new ruleObject('professional_dev', 'Other', 'div_row_q14'));
rules[rules.length] = rules['performance_evaluations'] = new Array(new ruleObject('performance_evaluations', 'Other', 'div_row_q17'));
rules[rules.length] = rules['overall_performance'] = new Array(new ruleObject('overall_performance', 'Other', 'div_row_q19'));

var lastData = null;
/* on page load
Updated Method in R4*/
$(document).ready(function() {
	// sets the height of the span
	$("span.label").each(function(){
		if($(this).height() < $(this).next().height())
			$(this).css({"height": $(this).next().height()});
	 });
	/* Code to add Commont Instruction Text for each textarea field Starts
	$('textarea').each(function(){
		if($(this).closest('div[id^="lineElt"]').find('label[id^="labelElt"]').html() != null)
		($(this).closest('div[id^="lineElt"]').find('label[id^="labelElt"]').html($(this).closest('div[id^="lineElt"]').find('label[id^="labelElt"]').html()+"<label style=\"display: block; padding-top: 12px; width: 80%; float: right; font-style: italic;\">Note: Please type a response. To copy and paste, it must be from a plain text file such as Notepad.</label>"));
		});
	Code ends*/
	//defines the action performed when a button is clicked 
	$("input[name='enter_amount']").fieldFormatter("XXXXXX");
	$("input[type='button'][id^='buttonElt']").click(function(e){
		var buttonName = $(this).attr("name");
		if(buttonName == "back"){
			var $self=$(this);
			var $form = $("#fb_divBl0ck1").closest('form');
			var isSame = false;
			data = $form.serializeArray();
			if(lastData != null){
				if($(lastData).compare($(data))){
					isSame = true;
				}
			}
			if(!isSame && lastData != null){
				e.preventDefault();
				$('<div id="dialogBox"></div>').appendTo('body')
	               .html('<div><h6>You have unsaved data. <br />If you would like to leave this screen without saving your data, click <b>OK</b>. <br/>If you would like to save your data, click <b>Cancel</b> and save your data.</h6></div>')
	               .dialog({
	                     modal: true, title: 'Unsaved Data', zIndex: 10000, autoOpen: true,
	                     width: 'auto', modal: true, resizable: false, draggable:false,
	                     dialogClass: 'dialogButtons',
	                     buttons: {
	                           OK: function () {//submits  form
	                        	   submitForm(buttonName);
	   							$(this).dialog("close");
	                           },
	                           Cancel: function () {// closes dialogue box
	                        	   $(this).dialog("close");
	                           }
	                     },
	                     close: function (event, ui) {
	                           $(this).remove();
	                     }
	               });
				$("div.dialogButtons div button:nth-child(2)").find("span").addClass("graybtutton");
			}else{
				submitForm(buttonName);
			}
		}else{
			submitForm(buttonName);
		}
	});// On inpput change
	$("input, select").change(function(){
		var changedNode = $(this);
		checkAndDisplay(changedNode, false);
	});
	$("select, input , textarea").each(function(){
		checkAndDisplay($(this), true);
	});
	$("div[id^='fb_divBl0ck']").each(function(){
		if($(this).children().size() <= 0){
			$(this).hide();
		}else if($(this).children().size() == 1){
			$(this).children().each(function(){
				if($(this).css("display").toLowerCase() == "none"){
					$(this).parent().hide().find("input, select, textarea").attr("disabled", true);
				}
			});
		}
	});
	var $form = $("#fb_divBl0ck1").closest('form');
	lastData = $form.serializeArray();
});

// This method validates the form 
function validateForm(){
	var checkBoxGroup2 =  new Array();
	checkBoxGroup2[0] = 'ceo_policy';
	checkBoxGroup2[1] = 'emp_policy';
	checkBoxGroup2[2] = 'anti_nepo';
	checkBoxGroup2[3] = 'staff_code_conduct';
	checkBoxGroup2[4] = 'doc_retemp_policy';
	checkBoxGroup2[5] = 'director_conflict';
	checkBoxGroup2[6] = 'conflict_interest';
	checkBoxGroup2[7] = 'conti_opp';
	checkBoxGroup2[8] = 'diversity';
	checkBoxGroup2[9] = 'emergency_pol';
	checkBoxGroup2[10] = 'whistle_blower';
	checkBoxGroup2[11] = 'record_rettention';
	checkBoxGroup2[12] = 'security_pol';
	checkBoxGroup2[13] = 'transition';
	checkBoxGroup2[14] = 'policy_none';

	if(!$("input[name='"+checkBoxGroup2[0]+"']").is(':disabled')){
		var isChecked = false;
		for(var i=0; i<checkBoxGroup2.length; i++ ){
			if($("input[name='"+checkBoxGroup2[i]+"']").is(":checked")){
				isChecked = true;
				break;
			}
		}
		if(!isChecked){
			if($(".errorMessages").length == 0){
				$("<ul class='errorMessages'></ul>").insertBefore("#fb_divBl0ck1");
			}
			$(".errorMessages").html("");
			$(".errorMessages").append("<li>Please select atleast one policy and procedure your organization have in place?</li>");
			return false;
		}
	}
	return true;
}
// This method checks ansd displays the element selected
function checkAndDisplay(changedNode, isOnLoad){
	var elementChangedName = changedNode.attr("name");
	hideUnhide(changedNode, isOnLoad);
	if(elementChangedName == checkBoxNoneName ){
		if(changedNode.is(":checked")){
			$.each(selectBoxNames, function(key) {
				$("input[name="+selectBoxNames[key]+"]").attr("disabled", true);
			});
		}else{
			$.each(selectBoxNames, function(key) { 
				if(!isOnLoad)
					$("input[name="+selectBoxNames[key]+"]").attr("disabled", false);
			});
		}
	}
	if($.inArray(elementChangedName, selectBoxNames) != -1){
		var someChecked = false;
		$.each(selectBoxNames, function(key) { 
			if($("input[name="+selectBoxNames[key]+"]").is(":checked")){
				someChecked = true;
			}
		});
		if(someChecked){
			$("input[name="+checkBoxNoneName+"]").attr("disabled", true);
		}else{
			if(!isOnLoad)
				$("input[name="+checkBoxNoneName+"]").attr("disabled", false);
		}
	}
}

var coveredItem = new Array();
//This method is used to hide/unhide the node
function hideUnhide(changedNode, isOnLoad){
	var elementChangedName = changedNode.attr("name");
	var ruleElts = rules[elementChangedName] ;
	if(ruleElts != null && typeof(ruleElts)!="undefined"){
		$.each(ruleElts, function(key) {
			ruleElt = ruleElts[key];
			if(ruleElt != null && typeof(ruleElt) != "undefined"){
				var requiredValue = ruleElt.value;
				var isArrayFlag = $.isArray(requiredValue);
				if((!isArrayFlag && requiredValue != "" && changedNode.val() ==  requiredValue) || (!isArrayFlag && requiredValue == "" && changedNode.is(":checked"))
						|| (isArrayFlag && $.inArray(changedNode.val(), requiredValue) >= 0)){
					$("div[name="+ruleElt.effName+"]").parent().show();
					if(!isOnLoad)
						$("div[name="+ruleElt.effName+"]").parent().find("input, select, textarea").attr("disabled", false);
					$("div[name="+ruleElt.effName+"]").parent().show().children().show();
					$("span.label").each(function(){
						if($(this).height() < $(this).next().height())
							$(this).css({"height": $(this).next().height()});
					 });
				}else{
					if((isOnLoad && $.inArray(ruleElt.effName, coveredItem)>=0) || !isOnLoad){
						$("div[name="+ruleElt.effName+"]").parent().hide().find("input, select, textarea").each(function(){
							if($(this).get(0).nodeName.toLowerCase() == "input"){
								if($(this).attr("type").toLowerCase() == "radio" || $(this).attr("type").toLowerCase() == "checkbox"){
									$(this).attr('checked', false);
								}else if($(this).attr("type").toLowerCase() != "password"){
									$(this).val("");
								}
							}else if($(this).get(0).nodeName.toLowerCase() == "textarea"){
								$(this).html("");
							}else if($(this).get(0).nodeName.toLowerCase() == "select"){
								$(this).val(" ");
							}
							hideUnhide($(this), isOnLoad);
						}).attr("disabled", true);
					}
					if(isOnLoad && $.inArray(ruleElt.effName, coveredItem) == -1){
						coveredItem[coveredItem.length] = ruleElt.effName;
					}
				}
			}
		});
	}
}
// This method is used to compare
jQuery.fn.compare = function(t) {
	if (this.length != t.length) { return false; }
	var a = this.sort(),
	b = t.sort();
	for (var i = 0; t[i]; i++) {
		if (a[i].name != b[i].name || a[i].value != b[i].value) { 
			return false;
		}
	}
	return true;
};